!function(e){function t(t){for(var r,i,c=t[0],u=t[1],l=t[2],s=0,d=[];s<c.length;s++)i=c[s],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(f&&f(t);d.length;)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var u=n[c];0!==o[u]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={0:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./";var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var f=u;a.push([22,1]),n()}({22:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(4),i=n.n(a),c=n(1),u=n.n(c),l=n(2),f=n.n(l);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var d=function(e){var t;return(null==e?void 0:null===(t=e.touches)||void 0===t?void 0:t[0])?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}},v=function(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top}};!function(){for(var e=new Float64Array(16),t=new Float64Array(16),n=0;n<16;n++)e[n]=Math.sin(Math.PI/8*n),t[n]=0;var r=u.a.custom.alloc(16,3),o=u.a.custom["fft_f64_".concat(16,"_asm")](window,null,r);o.init(),u.a.custom.array2heap(e,new Float64Array(r),16,0),u.a.custom.array2heap(t,new Float64Array(r),16,16),o.transform(),u.a.custom.heap2array(new Float64Array(r),e,16,0),u.a.custom.heap2array(new Float64Array(r),t,16,16)}();var m=function(e,t,n,r){var o=new Path2D;return o.moveTo(e,e),n.forEach((function(n,a){var i=Math.sqrt(n*n+r[a]*r[a]);o.lineTo(e+a*t,e+i*t)})),o},h=f.a.throttle(50,(function(e,t,n,r,o){console.time("get weird");var a=e.getImageData(0,0,t,n);!function(e,t,n,r,o){for(var a=0,i=Math.PI/64,c=0;c<t;c++)for(var u=c-o,l=Math.sin(i*u)*Math.sin(i*u),f=0;f<n;f++){var s=f-r,d=Math.cos(i*s)*Math.cos(i*s);e[a++]=255*l,e[a++]=255*d,a++,a++}}(a.data,t,n,r,o),e.putImageData(a,0,0),console.timeEnd("get weird")})),p=Object(r.memo)((function(e){var t=e.children,n=Object(r.useRef)(),a=s(Object(r.useState)(),2),i=a[0],c=a[1],u=s(Object(r.useState)(!1),2),l=u[0],m=u[1],h=s(Object(r.useState)({x:0,y:document.body.clientHeight-250}),2),p=h[0],y=h[1];return Object(r.useEffect)((function(){var e=function(){i&&c(void 0)};return window.addEventListener("mouseup",e),window.addEventListener("touchend",e),function(){window.removeEventListener("mouseup",e),window.removeEventListener("touchend",e)}}),[i]),Object(r.useEffect)((function(){if(!i)return f.a.noop;var e=function(e){e.preventDefault(),e.stopImmediatePropagation();var t=d(e);t.x=i.origin.x+(t.x-i.start.x),t.y=i.origin.y+(t.y-i.start.y),y(t)};return window.addEventListener("mousemove",e),window.addEventListener("touchmove",e),function(){window.removeEventListener("mousemove",e),window.removeEventListener("touchmove",e)}}),[i]),o.a.createElement("div",{ref:n,style:{display:"flex",flexDirection:"column",position:"absolute",top:"".concat(p.y,"px"),left:"".concat(p.x,"px"),backgroundColor:"#000000"}},o.a.createElement("div",{style:{flex:"1 0 auto",display:"flex"}},o.a.createElement("button",{style:{flex:"1 0 auto"},onMouseDown:function(e){e.preventDefault(),c({origin:v(n.current),start:d(e)})},onTouchStart:function(e){e.preventDefault(),c({origin:v(n.current),start:d(e)})}},"move"),o.a.createElement("button",{onClick:function(){return m(!l)}},l?"Show":"Hide")),!l&&t)})),y=Object(r.memo)((function(){var e=s(Object(r.useState)(),2),t=e[0],n=e[1],a=s(Object(r.useState)(),2),i=a[0],c=a[1],u=s(Object(r.useState)(),2),l=u[0],f=u[1],d=s(Object(r.useState)(),2),v=d[0],m=d[1];Object(r.useEffect)((function(){var e=l;return function(){e&&e.close()}}),[l]),Object(r.useEffect)((function(){if(l&&t){console.debug({image:l,canvas:t});var e=t.getContext("2d");null==e||e.drawImage(l,0,0)}}),[l,t]),Object(r.useEffect)((function(){var e=!0;return i&&createImageBitmap(i).then((function(t){e?f(t):t.close()}),(function(e){console.error(e),m(JSON.stringify(e))})),function(){e=!1}}),[i]);var h=Object(r.useCallback)(n,[n]);return o.a.createElement("div",null,o.a.createElement("canvas",{ref:h}),o.a.createElement("input",{onChange:function(e){var t,n;c(null==e?void 0:null===(t=e.target)||void 0===t?void 0:null===(n=t.files)||void 0===n?void 0:n[0])},type:"file",accept:"image/*"}),v&&o.a.createElement("pre",null,v))})),b=document.createElement("div");document.body.appendChild(b),document.body.setAttribute("style","position: absolute; top: 0; bottom: 0; left: 0; right: 0; margin: 0;"),i.a.render(o.a.createElement((function(){var e=s(Object(r.useState)(),2),t=e[0],n=e[1],a=s(Object(r.useState)(),2),i=a[0],c=a[1],l=s(Object(r.useState)(!1),2),f=l[0],d=l[1],v=Object(r.useCallback)(n,[n]);Object(r.useEffect)((function(){t&&(null!=i?i:0)>0&&(t.width!==i&&(t.setAttribute("width","".concat(i,"px")),t.setAttribute("height","".concat(i,"px"))),function(e){var t=e.getContext("2d");if(t){t.fillStyle="black",t.fillRect(0,0,e.width,e.height);for(var n=new Float64Array(64),r=new Float64Array(64),o=0;o<64;o++)n[o]=Math.sin(Math.PI/8*o),r[o]=Math.cos(Math.PI/8*o+Math.PI/2);t.strokeStyle="white",t.stroke(m(10,5,n,r));var a=u.a.custom.alloc(64,3),i=u.a.custom["fft_f64_".concat(64,"_asm")](window,null,a);i.init(),u.a.custom.array2heap(n,new Float64Array(a),64,0),u.a.custom.array2heap(r,new Float64Array(a),64,64),i.transform(),u.a.custom.heap2array(new Float64Array(a),n,64,0),u.a.custom.heap2array(new Float64Array(a),r,64,64),t.strokeStyle="white",t.stroke(m(10,5,n,r))}}(t))}),[t,i]);var b=Object(r.useCallback)((function(e){if(t&&f){e.preventDefault();var n=e.clientX-t.offsetLeft,r=e.clientY-t.offsetTop,o=t.getContext("2d");o&&h(o,t.width,t.height,n,r)}}),[t,i,f]),w=Object(r.useCallback)((function(e){e.preventDefault();var n=e.touches[0];if(t&&f&&n){var r=n.clientX-t.offsetLeft,o=n.clientY-t.offsetTop,a=t.getContext("2d");a&&h(a,t.width,t.height,r,o)}}),[t,i,f]);return Object(r.useEffect)((function(){var e=function(){return c(function(e){for(var t=32768;t>64&&t>e;)t>>=1;return t}(Math.min(document.body.clientWidth,document.body.clientHeight)))};return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}}),[c]),o.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},o.a.createElement("canvas",{ref:v,onMouseMove:b,onTouchMove:w}),o.a.createElement("div",{style:{height:"1em"}}),o.a.createElement("div",{style:{display:"flex",overflow:"auto",flex:"1 0 auto"}},o.a.createElement("div",{style:{marginRight:"1em"}},o.a.createElement("button",{onClick:function(){return d(!f)}},f?"enough":"get weird"))),o.a.createElement(p,null,o.a.createElement(y,null)))}),null),b)}});